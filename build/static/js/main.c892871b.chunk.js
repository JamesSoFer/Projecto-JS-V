(this["webpackJsonp4-react-components"]=this["webpackJsonp4-react-components"]||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(6),r=n.n(s),a=(n(16),n(3)),i=n(5),d=n(0);var j=function(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),s=n[0],r=n[1],j=Object(c.useState)(!1),u=Object(a.a)(j,2),o=u[0],l=u[1];Object(c.useEffect)((function(){b()}),[o]);var b=function(){fetch("".concat("https://students.hasura.app/api/rest/","students"),{method:"GET",headers:{"x-hasura-admin-secret":"733M3Tgq5IK2ALRXFSivpX86TGJX82goni63azRwZGCtVY1qN4t8521f1LE4iKxq"}}).then((function(e){return e.json()})).then((function(e){l(!0),r(e.students)}))};return o?Object(d.jsxs)("div",{style:{flex:"1 0 auto"},children:[Object(d.jsx)("h1",{children:"Students List"}),Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"ID"}),Object(d.jsx)("th",{children:"Name"})]})}),Object(d.jsxs)("tbody",{children:[s.map((function(t){return Object(d.jsxs)("tr",{className:e.hoverable?"hoverable":"",children:[Object(d.jsx)("td",{children:Object(d.jsx)(i.b,{to:"/student/".concat(t.id),children:t.id})}),Object(d.jsx)("td",{children:t.name})]},t.id)})),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{}),Object(d.jsx)("td",{})]})]})]})]}):Object(d.jsx)("p",{children:"loading..."})};var u=function(){return Object(d.jsxs)("div",{style:{borderBottom:"1px var(--border) solid",width:"100%",position:"fixed",top:0,left:0,background:"var(--background-alt)",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"16px",maxHeight:"40px"},children:[Object(d.jsx)(i.b,{style:{display:"block",margin:"1rem"},to:"/students",children:"Students List"}),Object(d.jsx)(i.b,{style:{display:"block",margin:"1rem 0"},to:"/addStudent",children:"Add Student"})]})};var o=function(e){return Object(d.jsx)("div",{style:{paddingTop:"4rem",display:"flex",flexDirection:"column",flexGrow:1,height:"calc(100vh - 5rem)",alignItems:"stretch"},children:e.children})};var l=function(e){var t={flex:"0 0 auto",display:"flex",justifyContent:"center",background:e.color};return Object(d.jsx)("div",{style:t,children:Object(d.jsx)("p",{children:"Made with \u2764\ufe0f and \u2615\ufe0f"})})},b=n(9),h=n.n(b),O=n(10),p=n(2),x=document.querySelector("#alert-root"),f=function(e){var t=e.message,n=e.type,c=e.isOpened;e.onClose,e.success;return c?r.a.createPortal(Object(d.jsxs)("div",{className:"alert ".concat(n),children:[Object(d.jsx)("div",{className:"Close",onClick:function(e){e.target.parentElement.style.display="none"},children:" Close X "}),Object(d.jsx)("span",{children:t})]}),x):null},m=Object(c.createContext)(),g=function(e){var t=e.children,n=Object(c.useState)(""),s=Object(a.a)(n,2),r=s[0],i=s[1],j=Object(c.useState)(""),u=Object(a.a)(j,2),o=u[0],l=u[1],b=Object(c.useState)(!1),h=Object(a.a)(b,2),O=h[0],p=h[1],x=Object(c.useState)("right"),f=Object(a.a)(x,2),g=f[0],v=f[1],S=Object(c.useState)(1e4),y=Object(a.a)(S,2),C=y[0],w=y[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){p(!1)}),C);return function(){return clearTimeout(e)}})),Object(d.jsx)(m.Provider,{value:{sendAlert:function(e){var t=e.type,n=e.message,c=e.closeCount,s=e.position;i(n),l(t),p(!0),w(c||1e4),v(s||"right")},type:o,message:r,isOpened:O,position:g},children:t})},v=function(){var e=Object(c.useContext)(m);if(void 0===e)throw new Error("You must wrap your application with <AlertProvider /> in order to useAlert().");return e},S=function(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),i=Object(a.a)(r,2),j=i[0],u=i[1],o=Object(c.useState)(!1),l=Object(a.a)(o,2),b=l[0],x=l[1],f=Object(p.f)(),m=v().sendAlert,g=function(){var e=Object(O.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.abrupt("return",fetch("".concat("https://students.hasura.app/api/rest/","student"),{method:"POST",headers:{"x-hasura-admin-secret":"733M3Tgq5IK2ALRXFSivpX86TGJX82goni63azRwZGCtVY1qN4t8521f1LE4iKxq"},body:JSON.stringify({id:t,name:n})}).then((function(e){return e.json()})).then((function(e){x(!1),null===e.insert_students_one?m({type:"warning",message:"student is repeated"}):(m({type:"success",message:"new student added"}),s(0),u(""),f("/"))})).catch((function(e){return console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Add Student"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(n,j)},children:[Object(d.jsx)("input",{required:!0,value:n,type:"number",name:"id",placeholder:"id",onChange:function(e){return s(e.target.value)}}),Object(d.jsx)("input",{required:!0,value:j,type:"text",name:"name",placeholder:"name",onChange:function(e){return u(e.target.value)}}),Object(d.jsx)("button",{disabled:b,type:"submit",value:"submit",children:b?"Loading":"Add student"})]})]})},y=n(11),C=function(){var e=Object(c.useState)({}),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),j=Object(a.a)(r,2),u=j[0],o=j[1],l=Object(p.g)();return Object(y.useEffect)((function(){var e;e=l.StudentId,fetch("".concat("https://students.hasura.app/api/rest/","student/").concat(e),{method:"GET",headers:{"x-hasura-admin-secret":"733M3Tgq5IK2ALRXFSivpX86TGJX82goni63azRwZGCtVY1qN4t8521f1LE4iKxq"}}).then((function(e){return e.json()})).then((function(e){o(!0),s(e.students_by_pk)}))}),[u]),u?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Student Profile"}),Object(d.jsx)(i.b,{to:"updateStudent/".concat(l.StudentId),children:"Update Student"}),Object(d.jsx)("hr",{}),Object(d.jsx)("h2",{children:"Name:"}),Object(d.jsx)("span",{children:null===n||void 0===n?void 0:n.name}),Object(d.jsx)("h3",{children:"ID"}),Object(d.jsx)("span",{children:l.StudentId})]}):Object(d.jsx)("p",{children:"Loading..."})};var w=function(){var e=v(),t=e.type,n=e.message,c=e.isOpened;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(o,{children:[Object(d.jsx)(u,{}),Object(d.jsx)(f,{isOpened:c,type:t,message:n}),Object(d.jsxs)(p.c,{children:[Object(d.jsx)(p.a,{path:"/",element:Object(d.jsx)(j,{hoverable:!0})}),Object(d.jsx)(p.a,{path:"/students",element:Object(d.jsx)(j,{hoverable:!0})}),Object(d.jsx)(p.a,{path:"/student/:StudentId",element:Object(d.jsx)(C,{})}),Object(d.jsx)(p.a,{path:"/addStudent",element:Object(d.jsx)(S,{})}),Object(d.jsx)(p.a,{path:"/updateStudent/:StudentId",element:Object(d.jsx)(S,{})}),Object(d.jsx)(p.a,{path:"*",element:Object(d.jsx)("main",{style:{padding:"1rem"},children:Object(d.jsx)("p",{children:"There's nothing here!"})})})]}),Object(d.jsx)(l,{})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};r.a.render(Object(d.jsx)(i.a,{children:Object(d.jsx)(g,{children:Object(d.jsx)(w,{})})}),document.getElementById("root")),T()}},[[19,1,2]]]);
//# sourceMappingURL=main.c892871b.chunk.js.map